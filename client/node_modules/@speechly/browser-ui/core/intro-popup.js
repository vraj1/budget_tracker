!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e}function a(t){return 0===Object.keys(t).length}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),d=l?t=>requestAnimationFrame(t):t;const p=new Set;function h(t){p.forEach((e=>{e.c(t)||(p.delete(e),e.f())})),0!==p.size&&d(h)}function f(t,e){t.appendChild(e)}function m(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function g(t){const e=v("style");return y(m(t),e),e.sheet}function y(t,e){return f(t.head||t,e),e.sheet}function w(t,e,n){t.insertBefore(e,n||null)}function b(t){t.parentNode&&t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function x(t){return document.createTextNode(t)}function C(){return x(" ")}function S(){return x("")}function E(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function T(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function A(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function _(t,e,n){t.classList[n?"add":"remove"](e)}function k(t){const e={};for(const n of t)e[n.name]=n.value;return e}const z=new Map;let N,O=0;function M(t,e,n,o,r,i,s,c=0){const a=16.666/o;let l="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*i(t);l+=100*t+`%{${s(o,1-o)}}\n`}const u=l+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,p=m(t),{stylesheet:h,rules:f}=z.get(p)||function(t,e){const n={stylesheet:g(e),rules:{}};return z.set(t,n),n}(p,t);f[d]||(f[d]=!0,h.insertRule(`@keyframes ${d} ${u}`,h.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${d} ${o}ms linear ${r}ms 1 both`,O+=1,d}function L(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),O-=r,O||d((()=>{O||(z.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&b(e)})),z.clear())})))}function P(t){N=t}function R(){if(!N)throw new Error("Function called outside component initialization");return N}const D=[],B=[],F=[],I=[],H=Promise.resolve();let V=!1;function j(t){F.push(t)}const q=new Set;let U,X=0;function W(){if(0!==X)return;const t=N;do{try{for(;X<D.length;){const t=D[X];X++,P(t),K(t.$$)}}catch(t){throw D.length=0,X=0,t}for(P(null),D.length=0,X=0;B.length;)B.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];q.has(e)||(q.add(e),e())}F.length=0}while(D.length);for(;I.length;)I.pop()();V=!1,q.clear(),P(t)}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}function Y(t,e,n){t.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}(`${e?"intro":"outro"}${n}`))}const G=new Set;let Z;function J(){Z={r:0,c:[],p:Z}}function Q(){Z.r||r(Z.c),Z=Z.p}function tt(t,e){t&&t.i&&(G.delete(t),t.i(e))}function et(t,e,n,o){if(t&&t.o){if(G.has(t))return;G.add(t),Z.c.push((()=>{G.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}const nt={duration:0};function ot(n,o,s,c){const a={direction:"both"};let l=o(n,s,a),f=c?0:1,m=null,g=null,y=null;function w(){y&&L(n,y)}function b(t,e){const n=t.b-f;return e*=Math.abs(n),{a:f,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function v(o){const{delay:i=0,duration:s=300,easing:c=e,tick:a=t,css:v}=l||nt,$={start:u()+i,b:o};o||($.group=Z,Z.r+=1),m||g?g=$:(v&&(w(),y=M(n,f,o,s,i,c,v)),o&&a(0,1),m=b($,s),j((()=>Y(n,o,"start"))),function(t){let e;0===p.size&&d(h),new Promise((n=>{p.add(e={c:t,f:n})}))}((t=>{if(g&&t>g.start&&(m=b(g,s),g=null,Y(n,m.b,"start"),v&&(w(),y=M(n,f,m.b,m.duration,0,c,l.css))),m)if(t>=m.end)a(f=m.b,1-f),Y(n,m.b,"end"),g||(m.b?w():--m.group.r||r(m.group.c)),m=null;else if(t>=m.start){const e=t-m.start;f=m.a+m.d*c(e/m.duration),a(f,1-f)}return!(!m&&!g)})))}return{run(t){i(l)?(U||(U=Promise.resolve(),U.then((()=>{U=null}))),U).then((()=>{l=l(a),v(t)})):v(t)},end(){w(),m=g=null}}}const rt="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function it(t,e,o,s){const{fragment:c,after_update:a}=t.$$;c&&c.m(e,o),s||j((()=>{const e=t.$$.on_mount.map(n).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(j)}function st(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ct(t,e){-1===t.$$.dirty[0]&&(D.push(t),V||(V=!0,H.then(W)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,i,s,c,a,l,u=[-1]){const d=N;P(e);const p=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};l&&l(p.root);let h=!1;if(p.ctx=i?i(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&c(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),h&&ct(e,t)),n})):[],p.update(),h=!0,r(p.before_update),p.fragment=!!s&&s(p.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);p.fragment&&p.fragment.l(t),t.forEach(b)}else p.fragment&&p.fragment.c();n.intro&&tt(e.$$.fragment),it(e,n.target,n.anchor,n.customElement),W()}P(d)}let lt;"function"==typeof HTMLElement&&(lt=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){st(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});class ut{$destroy(){st(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){this.$$set&&!a(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function dt(t,{delay:n=0,duration:o=400,easing:r=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*i}}var pt,ht,ft,mt,gt;!function(t){t.NoAudioConsent="NoAudioConsent",t.NoBrowserSupport="NoBrowserSupport",t.Stopped="Stopped",t.Starting="Starting",t.Started="Started"}(pt||(pt={})),function(t){t.Started="started",t.Stopped="stopped",t.SegmentEnd="segment_end",t.Transcript="transcript",t.Entity="entity",t.Intent="intent",t.TentativeTranscript="tentative_transcript",t.TentativeEntities="tentative_entities",t.TentativeIntent="tentative_intent"}(ht||(ht={})),function(t){t.Opened="WEBSOCKET_OPEN",t.Closed="WEBSOCKET_CLOSED",t.AudioProcessorReady="SOURCE_SAMPLE_RATE_SET_SUCCESS",t.VadSignalHigh="VadSignalHigh",t.VadSignalLow="VadSignalLow",t.RequestContextStart="RequestContextStart"}(ft||(ft={})),function(t){t.connect="connect",t.initAudioProcessor="initAudioProcessor",t.adjustAudioProcessor="adjustAudioProcessor",t.SET_SHARED_ARRAY_BUFFERS="SET_SHARED_ARRAY_BUFFERS",t.CLOSE="CLOSE",t.START_CONTEXT="START_CONTEXT",t.SWITCH_CONTEXT="SWITCH_CONTEXT",t.STOP_CONTEXT="STOP_CONTEXT",t.AUDIO="AUDIO",t.startStream="startStream",t.stopStream="stopStream",t.setContextOptions="setContextOptions"}(mt||(mt={})),function(t){t[t.Failed=0]="Failed",t[t.Disconnected=1]="Disconnected",t[t.Connected=2]="Connected",t[t.Active=3]="Active"}(gt||(gt={})),new Map([[gt.Failed,"Failed"],[gt.Disconnected,"Disconnected"],[gt.Connected,"Connected"],[gt.Active,"Active"]]);for(var yt=[],wt=0;wt<256;++wt)yt.push((wt+256).toString(16).substr(1));var bt,vt,$t,xt,Ct,St,Et,Tt,At="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_t={exports:{}};function kt(t){!function(t,e,n){const o=m(t);if(!o.getElementById(e)){const t=v("style");t.id=e,t.textContent=n,y(o,t)}}(t,"svelte-s2u2hd",".Icon.svelte-s2u2hd{position:absolute;width:var(--icon-size);height:var(--icon-size);top:50%;left:50%;transform:translate(-50%, -50%);pointer-events:none;transition:0.25s;opacity:var(--icon-opacity)}")}function zt(t){let e,n,o,r,i,s,c,a,l,u,d,p,h;return{c(){e=$("svg"),n=$("linearGradient"),o=$("animate"),r=$("animate"),i=$("stop"),s=$("stop"),c=$("stop"),a=$("stop"),l=$("stop"),u=x(">\n  "),d=$("g"),p=$("path"),h=$("rect"),T(o,"attributeName","y1"),T(o,"values","-200%; 0%;"),T(o,"dur","2s"),T(o,"repeatCount","indefinite"),T(r,"attributeName","y2"),T(r,"values","200%; 400%;"),T(r,"dur","2s"),T(r,"repeatCount","indefinite"),T(i,"offset","0%"),T(i,"stop-color","var(--gradient-stop1)"),T(s,"offset","25%"),T(s,"stop-color","var(--gradient-stop2)"),T(c,"offset","50%"),T(c,"stop-color","var(--gradient-stop1)"),T(a,"offset","75%"),T(a,"stop-color","var(--gradient-stop2)"),T(l,"offset","100%"),T(l,"stop-color","var(--gradient-stop1)"),T(n,"id","gradient"),T(n,"x1","50%"),T(n,"y1","-200%"),T(n,"x2","50%"),T(n,"y2","200%"),T(p,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(h,"x","20"),T(h,"y","1"),T(h,"width","16"),T(h,"height","37"),T(h,"rx","8"),T(d,"fill","url(#gradient)"),T(d,"fill-rule","evenodd"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,m){w(t,e,m),f(e,n),f(n,o),f(n,r),f(n,i),f(n,s),f(n,c),f(n,a),f(n,l),f(e,u),f(e,d),f(d,p),f(d,h)},d(t){t&&b(e)}}}function Nt(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("path"),r=$("rect"),T(o,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(r,"x","20"),T(r,"y","1"),T(r,"width","16"),T(r,"height","37"),T(r,"rx","8"),T(n,"fill","var(--icon-color)"),T(n,"fill-rule","evenodd"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){w(t,e,i),f(e,n),f(n,o),f(n,r)},d(t){t&&b(e)}}}function Ot(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("path"),r=$("path"),T(o,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(o,"fill-rule","nonzero"),T(r,"d","M37 13.081V31a8 8 0 11-16 0v-1.919l16-16zM26 1a8 8 0 018 8v1.319L18 26.318V9a8 8 0 018-8zM37.969 7.932l3.74-7.35 3.018 2.625zM39.654 10.608l7.531-3.359.695 3.94z"),T(n,"fill","var(--icon-color)"),T(n,"fill-rule","evenodd"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){w(t,e,i),f(e,n),f(n,o),f(n,r)},d(t){t&&b(e)}}}function Mt(t){let e,n,o,r;return{c(){e=$("svg"),n=$("g"),o=$("path"),r=$("path"),T(o,"d","M36 14.828V30a8 8 0 01-15.961.79l15.96-15.962zM28 1a8 8 0 018 8v.172L20 25.173V9a8 8 0 018-8z"),T(r,"d","M42 26h4v4c0 9.265-7 16.895-16 17.89V55h-4v-7.11c-8.892-.982-15.833-8.444-15.997-17.56L10 30v-4h4v4c0 7.732 6.268 14 14 14 7.628 0 13.83-6.1 13.997-13.687L42 30v-4z"),T(n,"fill","var(--icon-color)"),T(n,"fill-rule","nonzero"),T(e,"class","Icon svelte-s2u2hd"),T(e,"viewBox","0 0 56 56"),T(e,"xmlns","http://www.w3.org/2000/svg")},m(t,i){w(t,e,i),f(e,n),f(n,o),f(n,r)},d(t){t&&b(e)}}}function Lt(e){let n,o,r,i,s=e[0]===Ct.MicActive&&zt(),c=e[0]===Ct.Mic&&Nt(),a=e[0]===Ct.Error&&Ot(),l=e[0]===Ct.Denied&&Mt();return{c(){s&&s.c(),n=C(),c&&c.c(),o=C(),a&&a.c(),r=C(),l&&l.c(),i=S()},m(t,e){s&&s.m(t,e),w(t,n,e),c&&c.m(t,e),w(t,o,e),a&&a.m(t,e),w(t,r,e),l&&l.m(t,e),w(t,i,e)},p(t,[e]){t[0]===Ct.MicActive?s||(s=zt(),s.c(),s.m(n.parentNode,n)):s&&(s.d(1),s=null),t[0]===Ct.Mic?c||(c=Nt(),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null),t[0]===Ct.Error?a||(a=Ot(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null),t[0]===Ct.Denied?l||(l=Mt(),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},i:t,o:t,d(t){s&&s.d(t),t&&b(n),c&&c.d(t),t&&b(o),a&&a.d(t),t&&b(r),l&&l.d(t),t&&b(i)}}}function Pt(t,e,n){let{icon:o=Ct.Mic}=e;return t.$$set=t=>{"icon"in t&&n(0,o=t.icon)},[o]}
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */
bt=_t,vt=_t.exports,function(t){var e=vt,n=bt&&bt.exports==e&&bt,o="object"==typeof At&&At;o.global!==o&&o.window!==o||(t=o);var r=function(t){this.message=t};(r.prototype=new Error).name="InvalidCharacterError";var i=function(t){throw new r(t)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,a={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,o,r,c=t.length%3,a="",l=-1,u=t.length-c;++l<u;)e=t.charCodeAt(l)<<16,n=t.charCodeAt(++l)<<8,o=t.charCodeAt(++l),a+=s.charAt((r=e+n+o)>>18&63)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+s.charAt(63&r);return 2==c?(e=t.charCodeAt(l)<<8,n=t.charCodeAt(++l),a+=s.charAt((r=e+n)>>10)+s.charAt(r>>4&63)+s.charAt(r<<2&63)+"="):1==c&&(r=t.charCodeAt(l),a+=s.charAt(r>>2)+s.charAt(r<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var n,o,r=0,a="",l=-1;++l<e;)o=s.indexOf(t.charAt(l)),n=r%4?64*n+o:o,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};if(e&&!e.nodeType)if(n)n.exports=a;else for(var l in a)a.hasOwnProperty(l)&&(e[l]=a[l]);else t.base64=a}(At),function(t){t.SpeechlyFirstConnect="SpeechlyFirstConnect"}($t||($t={})),function(t){t.speechlypoweron="speechlypoweron",t.holdstart="holdstart",t.holdend="holdend",t.speechstate="speechstate",t.audiosourcestate="audiosourcestate",t.speechsegment="speechsegment",t.speechhandled="speechhandled",t.showhint="showhint",t.transcriptdrawerhint="hint",t.speechlyintroready="speechlyintroready",t.speechlyintroclosed="speechlyintroclosed",t.startcontext="startcontext",t.stopcontext="stopcontext",t.requeststartmicrophone="requeststartmicrophone"}(xt||(xt={})),function(t){t.Mic="mic",t.MicActive="micactive",t.Error="error",t.Denied="denied"}(Ct||(Ct={})),function(t){t.Hold="hold",t.Click="click",t.Noninteractive="noninteractive"}(St||(St={})),function(t){t.None="none",t.Connecting="connecting",t.Busy="busy"}(Et||(Et={})),function(t){t.None="none",t.Whirl="whirl"}(Tt||(Tt={})),gt.Disconnected,gt.Connected,gt.Active,gt.Failed,pt.NoBrowserSupport,pt.NoAudioConsent;class Rt extends ut{constructor(t){super(),at(this,t,Pt,Lt,s,{icon:0},kt)}}const Dt=()=>{const t=R();return(e,n)=>{t.dispatchEvent(new CustomEvent(e,{detail:n,composed:!0}))}},{window:Bt}=rt;function Ft(t){let e;return{c(){e=v("link"),T(e,"href","https://fonts.googleapis.com/css2?family=Saira+Condensed:wght@700&display=swap"),T(e,"rel","stylesheet")},m(t,n){w(t,e,n)},d(t){t&&b(e)}}}function It(t){let e;return{c(){e=v("link"),T(e,"href",t[2]),T(e,"rel","stylesheet")},m(t,n){w(t,e,n)},p(t,n){4&n&&T(e,"href",t[2])},d(t){t&&b(e)}}}function Ht(t){let e,n,o,r,i,s,c,a,l,u;const d=[Xt,Ut,qt,jt,Vt],p=[];function h(t,e){return t[3]===Yt||t[3]===pt.Starting?0:t[3]===Gt?1:t[3]===pt.NoAudioConsent?2:t[3]===pt.NoBrowserSupport?3:4}return s=h(t),c=p[s]=d[s](t),{c(){e=v("modalbg"),o=C(),r=v("modalcontent"),i=v("main"),c.c(),a=C(),l=v("footer"),l.innerHTML='Voice input is automatically transcribed by <a target="_blank" href="https://speechly.com/" rel="noopener noreferrer">Speechly</a> and can be used to improve the quality of service under <a target="_blank" href="https://www.speechly.com/privacy/terms-and-conditions" rel="noopener noreferrer">terms of use</a>.',T(r,"class",t[1]),_(r,"defaultTypography",t[6])},m(t,n){w(t,e,n),w(t,o,n),w(t,r,n),f(r,i),p[s].m(i,null),f(r,a),f(r,l),u=!0},p(t,e){let n=s;s=h(t),s===n?p[s].p(t,e):(J(),et(p[n],1,1,(()=>{p[n]=null})),Q(),c=p[s],c?c.p(t,e):(c=p[s]=d[s](t),c.c()),tt(c,1),c.m(i,null)),(!u||2&e)&&T(r,"class",t[1]),(!u||66&e)&&_(r,"defaultTypography",t[6])},i(o){u||(j((()=>{n||(n=ot(e,t[7],{duration:200},!0)),n.run(1)})),tt(c),u=!0)},o(o){n||(n=ot(e,t[7],{duration:200},!1)),n.run(0),et(c),u=!1},d(t){t&&b(e),t&&n&&n.end(),t&&b(o),t&&b(r),p[s].d()}}}function Vt(e){let n,o,r,i,s,c,a,l;return{c(){n=v("h2"),n.textContent="Failed to connect to Speechly",o=C(),r=v("p"),r.textContent="Please check your internet connection. If the problem persists, please try again later.",i=C(),s=v("options"),c=v("button"),c.textContent="Ok, got it",T(c,"class","button button-primary")},m(t,u){w(t,n,u),w(t,o,u),w(t,r,u),w(t,i,u),w(t,s,u),f(s,c),a||(l=E(c,"click",e[8]),a=!0)},p:t,i:t,o:t,d(t){t&&b(n),t&&b(o),t&&b(r),t&&b(i),t&&b(s),a=!1,l()}}}function jt(e){let n,o,r,i,s,c,a,l;return{c(){n=v("h2"),n.textContent="Unsupported browser",o=C(),r=v("p"),r.textContent="To use voice input, please visit this site using a supported browser.",i=C(),s=v("options"),c=v("button"),c.textContent="Ok, got it",T(c,"class","button button-primary")},m(t,u){w(t,n,u),w(t,o,u),w(t,r,u),w(t,i,u),w(t,s,u),f(s,c),a||(l=E(c,"click",e[8]),a=!0)},p:t,i:t,o:t,d(t){t&&b(n),t&&b(o),t&&b(r),t&&b(i),t&&b(s),a=!1,l()}}}function qt(e){let n,o,i,s,c,a,l,u,d,p;return{c(){n=v("h2"),n.textContent="Microphone blocked",o=C(),i=v("p"),i.textContent=`To use voice input, ${window.location.hostname} needs access to your microphone. Check your\n          browser preferences to allow microphone access and reload the page.`,s=C(),c=v("options"),a=v("button"),a.textContent="Ok, got it",l=C(),u=v("button"),u.textContent="Reload page",T(a,"class","button button-secondary"),T(u,"class","button button-primary")},m(t,r){w(t,n,r),w(t,o,r),w(t,i,r),w(t,s,r),w(t,c,r),f(c,a),f(c,l),f(c,u),d||(p=[E(a,"click",e[8]),E(u,"click",e[18])],d=!0)},p:t,i:t,o:t,d(t){t&&b(n),t&&b(o),t&&b(i),t&&b(s),t&&b(c),d=!1,r(p)}}}function Ut(e){let n,o,i,s,c,a,l,u,d,p;return{c(){n=v("h2"),n.textContent="HTTPS required",o=C(),i=v("p"),i.textContent="To use the voice interface, please visit this site using the secure\n          HTTPS protocol.",s=C(),c=v("options"),a=v("button"),a.textContent="Ok, got it",l=C(),u=v("button"),u.textContent="Try with HTTPS",T(a,"class","button button-secondary"),T(u,"class","button button-primary")},m(t,r){w(t,n,r),w(t,o,r),w(t,i,r),w(t,s,r),w(t,c,r),f(c,a),f(c,l),f(c,u),d||(p=[E(a,"click",e[8]),E(u,"click",e[12])],d=!0)},p:t,i:t,o:t,d(t){t&&b(n),t&&b(o),t&&b(i),t&&b(s),t&&b(c),d=!1,r(p)}}}function Xt(t){let e,n,o,r,i,s,c,a,l,u,d,p,h,m,g,y,$,S,_,k=window.location.hostname+"";d=new Rt({});let z=t[4]&&Wt(t);return{c(){var t;e=v("h2"),e.innerHTML='<slot name="priming-title">Allow microphone</slot>',n=C(),o=v("p"),r=v("slot"),i=x("To use voice input, press "),s=v("strong"),s.textContent="Allow",c=x(" to give "),a=x(k),l=x(" access to your microphone.\n            Audio is only captured when "),u=v("span"),(t=d.$$.fragment)&&t.c(),p=x(" button is pressed."),h=C(),m=v("options"),g=v("button"),g.textContent="Not now",y=C(),z&&z.c(),A(u,"display","inline-block"),A(u,"position","relative"),A(u,"color","white"),A(u,"width","20px"),A(u,"height","10px"),A(u,"--icon-color","white"),A(u,"--icon-size","20px"),T(r,"name","priming-body"),T(g,"class","button button-secondary")},m(b,v){w(b,e,v),w(b,n,v),w(b,o,v),f(o,r),f(r,i),f(r,s),f(r,c),f(r,a),f(r,l),f(r,u),it(d,u,null),f(r,p),w(b,h,v),w(b,m,v),f(m,g),f(m,y),z&&z.m(m,null),$=!0,S||(_=E(g,"click",t[8]),S=!0)},p(t,e){t[4]?z?z.p(t,e):(z=Wt(t),z.c(),z.m(m,null)):z&&(z.d(1),z=null)},i(t){$||(tt(d.$$.fragment,t),$=!0)},o(t){et(d.$$.fragment,t),$=!1},d(t){t&&b(e),t&&b(n),t&&b(o),st(d),t&&b(h),t&&b(m),z&&z.d(),S=!1,_()}}}function Wt(t){let e,n,o,r,i;return{c(){e=v("button"),n=x("Allow"),T(e,"class","button button-primary"),e.disabled=o=t[3]===pt.Starting},m(o,s){w(o,e,s),f(e,n),r||(i=E(e,"click",t[9]),r=!0)},p(t,n){8&n&&o!==(o=t[3]===pt.Starting)&&(e.disabled=o)},d(t){t&&b(e),r=!1,i()}}}function Kt(e){let n,o,i,s,c,a,l,u=e[6]&&Ft(),d=void 0!==e[2]&&It(e),p=e[5]&&Ht(e);return{c(){u&&u.c(),n=S(),o=C(),d&&d.c(),i=C(),s=v("modal"),p&&p.c(),this.c=t,A(s,"--remsize",e[0])},m(t,r){u&&u.m(document.head,null),f(document.head,n),w(t,o,r),d&&d.m(t,r),w(t,i,r),w(t,s,r),p&&p.m(s,null),c=!0,a||(l=[E(Bt,"keydown",e[10]),E(Bt,"message",e[11])],a=!0)},p(t,[e]){t[6]?u||(u=Ft(),u.c(),u.m(n.parentNode,n)):u&&(u.d(1),u=null),void 0!==t[2]?d?d.p(t,e):(d=It(t),d.c(),d.m(i.parentNode,i)):d&&(d.d(1),d=null),t[5]?p?(p.p(t,e),32&e&&tt(p,1)):(p=Ht(t),p.c(),tt(p,1),p.m(s,null)):p&&(J(),et(p,1,1,(()=>{p=null})),Q()),(!c||1&e)&&A(s,"--remsize",t[0])},i(t){c||(tt(p),c=!0)},o(t){et(p),c=!1},d(t){u&&u.d(t),b(n),t&&b(o),d&&d.d(t),t&&b(i),t&&b(s),p&&p.d(),a=!1,r(l)}}}const Yt="PagePriming",Gt="HttpsRequired";function Zt(t,e,n){let o,r;var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(r,i){function s(t){try{a(o.next(t))}catch(t){i(t)}}function c(t){try{a(o.throw(t))}catch(t){i(t)}}function a(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,c)}a((o=o.apply(t,e||[])).next())}))};let{hide:s="auto"}=e,{clientstate:c}=e,{microphonestate:a}=e,{remsize:l="1.0rem"}=e,{position:u="fixed"}=e,{customcssurl:d}=e,{customtypography:p}=e,h=!0;const f=Dt(),m=(g=dt,function(t,e){if(!t.hasOwnProperty("ownerDocument")){Object.defineProperty(t,"ownerDocument",{get:function(){return t.parentElement}});let e=t;for(;e.parentElement;)e=e.parentElement;t.parentElement.head=e}return g(t,e)});var g;let y=!1,w=Yt,b=null,v=!1;var $;$=()=>{n(17,y=!0),window.postMessage({type:xt.speechlyintroready},"*")},R().$$.on_mount.push($);const x=(t={})=>{n(5,o=!1),f("speechlyintroclosed",t),window.postMessage(Object.assign({type:xt.speechlyintroclosed},t),"*")},C=t=>{var e,r;("auto"===s&&n(5,o=!0),b&&(window.clearTimeout(b),b=null),"https:"===(null===(e=null===window||void 0===window?void 0:window.location)||void 0===e?void 0:e.protocol)||("localhost"===(r=window.location.hostname)||"[::1]"===r||null!==r.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)))?n(3,w=t):n(3,w=Gt)},S=t=>{switch(t){case pt.Starting:w===Yt?(n(3,w=t),b=window.setTimeout((()=>{b=null,"auto"===s&&n(5,o=!0)}),500)):n(5,o=!0);break;case pt.Started:h&&(h=!1,b?(window.clearTimeout(b),b=null,x()):x({firstrun:!0}));break;case pt.NoAudioConsent:case pt.NoBrowserSupport:C(t)}},E=t=>{if(t===gt.Failed)C(t)};return t.$$set=t=>{"hide"in t&&n(13,s=t.hide),"clientstate"in t&&n(14,c=t.clientstate),"microphonestate"in t&&n(15,a=t.microphonestate),"remsize"in t&&n(0,l=t.remsize),"position"in t&&n(1,u=t.position),"customcssurl"in t&&n(2,d=t.customcssurl),"customtypography"in t&&n(16,p=t.customtypography)},t.$$.update=()=>{16384&t.$$.dirty&&c&&E(parseInt(c)),32768&t.$$.dirty&&a&&S(a),139264&t.$$.dirty&&n(5,o=y&&"false"===s),65536&t.$$.dirty&&n(6,r=void 0===p||"false"===p)},[l,u,d,w,v,o,r,m,x,()=>i(void 0,void 0,void 0,(function*(){f(xt.requeststartmicrophone)})),t=>{y&&"Escape"===t.key&&(t.preventDefault(),x())},t=>{switch(t.data.type){case xt.speechlypoweron:"auto"===s&&n(5,o=!0),n(4,v=!0),n(3,w=Yt);break;case xt.speechstate:E(t.data.state);break;case xt.audiosourcestate:S(t.data.state);break;case xt.holdstart:switch(t.data.audioSourceState){case pt.NoAudioConsent:case pt.NoBrowserSupport:C(t.data.audioSourceState)}}},()=>{const t=window.location.href.replace("http:","https:");window.location.replace(t)},s,c,a,p,y,()=>{window.location.reload()}]}class Jt extends lt{constructor(t){super(),this.shadowRoot.innerHTML="<style>modal{font-size:var(--remsize);pointer-events:none;height:100%}modalbg{position:fixed;top:0;bottom:0;left:0;right:0;overflow:hidden;z-index:2000;pointer-events:auto;background-color:rgba(0,0,0,0.75);backdrop-filter:blur(3px)}modalcontent{z-index:2001;pointer-events:auto;box-sizing:border-box;width:100%;min-height:100%;padding:1.5rem;display:flex;flex-direction:column;align-items:center;justify-content:center;color:#fff}modalcontent.fixed{position:fixed;top:0;left:0;right:0;bottom:0;overflow-x:hidden;overflow-y:auto}modalcontent.absolute{position:absolute;top:0;left:0;right:0;height:100vh}.defaultTypography{font-family:-apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif;color:#fff;font-size:1rem;line-height:1.5}.defaultTypography h2{font-family:'Saira Condensed', sans-serif;padding:0;margin:0;text-transform:uppercase;color:#fff;font-size:1.5rem;line-height:1.25}main{position:relative;box-sizing:border-box;width:100%;max-width:400px;margin:auto 0;padding:1.5rem 0}options{display:flex;margin-top:2rem;gap:8px}.button{background-color:transparent;box-sizing:border-box;border:1px solid transparent;border-radius:999px;cursor:pointer;font-family:inherit;font-size:1rem;font-weight:600;line-height:1.25;min-width:7rem;padding:0.5rem 1.5rem;transition:all 0.15s ease;white-space:nowrap;-webkit-tap-highlight-color:transparent}.button[disabled],.button:disabled{cursor:auto;opacity:0.5;pointer-events:none}.button-secondary{border-color:#fff;color:#fff}.button-secondary:hover{border-color:#ccc;color:#ccc}.button-primary{background-color:#fff;border-color:#fff;color:#000}.button-primary:hover{border-color:#ccc;background-color:#ccc;color:#000}footer{box-sizing:border-box;font-size:0.75rem;color:#999;margin:0}a,a:visited{color:#999;transition:all 0.15s ease;-webkit-tap-highlight-color:transparent}a:hover{color:#ccc}</style>",at(this,{target:this.shadowRoot,props:k(this.attributes),customElement:!0},Zt,Kt,c,{hide:13,clientstate:14,microphonestate:15,remsize:0,position:1,customcssurl:2,customtypography:16},null),t&&(t.target&&w(t.target,this,t.anchor),t.props&&(this.$set(t.props),W()))}static get observedAttributes(){return["hide","clientstate","microphonestate","remsize","position","customcssurl","customtypography"]}get hide(){return this.$$.ctx[13]}set hide(t){this.$$set({hide:t}),W()}get clientstate(){return this.$$.ctx[14]}set clientstate(t){this.$$set({clientstate:t}),W()}get microphonestate(){return this.$$.ctx[15]}set microphonestate(t){this.$$set({microphonestate:t}),W()}get remsize(){return this.$$.ctx[0]}set remsize(t){this.$$set({remsize:t}),W()}get position(){return this.$$.ctx[1]}set position(t){this.$$set({position:t}),W()}get customcssurl(){return this.$$.ctx[2]}set customcssurl(t){this.$$set({customcssurl:t}),W()}get customtypography(){return this.$$.ctx[16]}set customtypography(t){this.$$set({customtypography:t}),W()}}customElements.get("intro-popup")?console.warn("Skipping re-defining customElement intro-popup"):customElements.define("intro-popup",Jt)}));
//# sourceMappingURL=intro-popup.js.map
