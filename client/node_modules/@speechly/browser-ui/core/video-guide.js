!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function i(t){return"function"==typeof t}let s;function c(t,e){return s||(s=document.createElement("a")),s.href=e,t===s.href}function a(t,e){return t!=t?e==e:t!==e}const d="undefined"!=typeof window;let u=d?()=>window.performance.now():()=>Date.now(),l=d?t=>requestAnimationFrame(t):t;const f=new Set;function h(t){f.forEach((e=>{e.c(t)||(f.delete(e),e.f())})),0!==f.size&&l(h)}function p(t,e){t.appendChild(e)}function m(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function g(t){const e=v("style");return function(t,e){p(t.head||t,e),e.sheet}(m(t),e),e.sheet}function b(t,e,n){t.insertBefore(e,n||null)}function $(t){t.parentNode&&t.parentNode.removeChild(t)}function v(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function w(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function E(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function x(t,e,n,o){null===n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function S(t){const e={};for(const n of t)e[n.name]=n.value;return e}const C=new Map;let _,A=0;function T(t,e,n,o,r,i,s,c=0){const a=16.666/o;let d="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*i(t);d+=100*t+`%{${s(o,1-o)}}\n`}const u=d+`100% {${s(n,1-n)}}\n}`,l=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,f=m(t),{stylesheet:h,rules:p}=C.get(f)||function(t,e){const n={stylesheet:g(e),rules:{}};return C.set(t,n),n}(f,t);p[l]||(p[l]=!0,h.insertRule(`@keyframes ${l} ${u}`,h.cssRules.length));const b=t.style.animation||"";return t.style.animation=`${b?`${b}, `:""}${l} ${o}ms linear ${r}ms 1 both`,A+=1,l}function k(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),A-=r,A||l((()=>{A||(C.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&$(e)})),C.clear())})))}function z(t){_=t}function O(){if(!_)throw new Error("Function called outside component initialization");return _}const N=[],R=[],D=[],P=[],F=Promise.resolve();let L=!1;function M(t){D.push(t)}const H=new Set;let B,I=0;function j(){if(0!==I)return;const t=_;do{try{for(;I<N.length;){const t=N[I];I++,z(t),q(t.$$)}}catch(t){throw N.length=0,I=0,t}for(z(null),N.length=0,I=0;R.length;)R.pop()();for(let t=0;t<D.length;t+=1){const e=D[t];H.has(e)||(H.add(e),e())}D.length=0}while(N.length);for(;P.length;)P.pop()();L=!1,H.clear(),z(t)}function q(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(M)}}function U(t,e,n){t.dispatchEvent(function(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}(`${e?"intro":"outro"}${n}`))}const X=new Set;let W;function V(t,e){t&&t.i&&(X.delete(t),t.i(e))}function Y(t,e,n,o){if(t&&t.o){if(X.has(t))return;X.add(t),W.c.push((()=>{X.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}const K={duration:0};function Z(n,o,s,c){const a={direction:"both"};let d=o(n,s,a),p=c?0:1,m=null,g=null,b=null;function $(){b&&k(n,b)}function v(t,e){const n=t.b-p;return e*=Math.abs(n),{a:p,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(o){const{delay:i=0,duration:s=300,easing:c=e,tick:a=t,css:y}=d||K,w={start:u()+i,b:o};o||(w.group=W,W.r+=1),m||g?g=w:(y&&($(),b=T(n,p,o,s,i,c,y)),o&&a(0,1),m=v(w,s),M((()=>U(n,o,"start"))),function(t){let e;0===f.size&&l(h),new Promise((n=>{f.add(e={c:t,f:n})}))}((t=>{if(g&&t>g.start&&(m=v(g,s),g=null,U(n,m.b,"start"),y&&($(),b=T(n,p,m.b,m.duration,0,c,d.css))),m)if(t>=m.end)a(p=m.b,1-p),U(n,m.b,"end"),g||(m.b?$():--m.group.r||r(m.group.c)),m=null;else if(t>=m.start){const e=t-m.start;p=m.a+m.d*c(e/m.duration),a(p,1-p)}return!(!m&&!g)})))}return{run(t){i(d)?(B||(B=Promise.resolve(),B.then((()=>{B=null}))),B).then((()=>{d=d(a),y(t)})):y(t)},end(){$(),m=g=null}}}const G="undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:global;function J(t,e){-1===t.$$.dirty[0]&&(N.push(t),L||(L=!0,F.then(j)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Q(e,s,c,a,d,u,l,f=[-1]){const h=_;z(e);const p=e.$$={fragment:null,ctx:[],props:u,update:t,not_equal:d,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(h?h.$$.context:[])),callbacks:o(),dirty:f,skip_bound:!1,root:s.target||h.$$.root};l&&l(p.root);let m=!1;if(p.ctx=c?c(e,s.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return p.ctx&&d(p.ctx[t],p.ctx[t]=r)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](r),m&&J(e,t)),n})):[],p.update(),m=!0,r(p.before_update),p.fragment=!!a&&a(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach($)}else p.fragment&&p.fragment.c();s.intro&&V(e.$$.fragment),function(t,e,o,s){const{fragment:c,after_update:a}=t.$$;c&&c.m(e,o),s||M((()=>{const e=t.$$.on_mount.map(n).filter(i);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(M)}(e,s.target,s.anchor,s.customElement),j()}z(h)}let tt;function et(t,{delay:n=0,duration:o=400,easing:r=e}={}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*i}}var nt,ot,rt,it,st;"function"==typeof HTMLElement&&(tt=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(n).filter(i);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){r(this.$$.on_disconnect)}$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(e,n){if(!i(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}),function(t){t.NoAudioConsent="NoAudioConsent",t.NoBrowserSupport="NoBrowserSupport",t.Stopped="Stopped",t.Starting="Starting",t.Started="Started"}(nt||(nt={})),function(t){t.Started="started",t.Stopped="stopped",t.SegmentEnd="segment_end",t.Transcript="transcript",t.Entity="entity",t.Intent="intent",t.TentativeTranscript="tentative_transcript",t.TentativeEntities="tentative_entities",t.TentativeIntent="tentative_intent"}(ot||(ot={})),function(t){t.Opened="WEBSOCKET_OPEN",t.Closed="WEBSOCKET_CLOSED",t.AudioProcessorReady="SOURCE_SAMPLE_RATE_SET_SUCCESS",t.VadSignalHigh="VadSignalHigh",t.VadSignalLow="VadSignalLow",t.RequestContextStart="RequestContextStart"}(rt||(rt={})),function(t){t.connect="connect",t.initAudioProcessor="initAudioProcessor",t.adjustAudioProcessor="adjustAudioProcessor",t.SET_SHARED_ARRAY_BUFFERS="SET_SHARED_ARRAY_BUFFERS",t.CLOSE="CLOSE",t.START_CONTEXT="START_CONTEXT",t.SWITCH_CONTEXT="SWITCH_CONTEXT",t.STOP_CONTEXT="STOP_CONTEXT",t.AUDIO="AUDIO",t.startStream="startStream",t.stopStream="stopStream",t.setContextOptions="setContextOptions"}(it||(it={})),function(t){t[t.Failed=0]="Failed",t[t.Disconnected=1]="Disconnected",t[t.Connected=2]="Connected",t[t.Active=3]="Active"}(st||(st={})),new Map([[st.Failed,"Failed"],[st.Disconnected,"Disconnected"],[st.Connected,"Connected"],[st.Active,"Active"]]);for(var ct=[],at=0;at<256;++at)ct.push((at+256).toString(16).substr(1));var dt,ut,lt,ft,ht,pt,mt,gt,bt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},$t={exports:{}};
/*! http://mths.be/base64 v0.1.0 by @mathias | MIT license */
dt=$t,ut=$t.exports,function(t){var e=ut,n=dt&&dt.exports==e&&dt,o="object"==typeof bt&&bt;o.global!==o&&o.window!==o||(t=o);var r=function(t){this.message=t};(r.prototype=new Error).name="InvalidCharacterError";var i=function(t){throw new r(t)},s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=/[\t\n\f\r ]/g,a={encode:function(t){t=String(t),/[^\0-\xFF]/.test(t)&&i("The string to be encoded contains characters outside of the Latin1 range.");for(var e,n,o,r,c=t.length%3,a="",d=-1,u=t.length-c;++d<u;)e=t.charCodeAt(d)<<16,n=t.charCodeAt(++d)<<8,o=t.charCodeAt(++d),a+=s.charAt((r=e+n+o)>>18&63)+s.charAt(r>>12&63)+s.charAt(r>>6&63)+s.charAt(63&r);return 2==c?(e=t.charCodeAt(d)<<8,n=t.charCodeAt(++d),a+=s.charAt((r=e+n)>>10)+s.charAt(r>>4&63)+s.charAt(r<<2&63)+"="):1==c&&(r=t.charCodeAt(d),a+=s.charAt(r>>2)+s.charAt(r<<4&63)+"=="),a},decode:function(t){var e=(t=String(t).replace(c,"")).length;e%4==0&&(e=(t=t.replace(/==?$/,"")).length),(e%4==1||/[^+a-zA-Z0-9/]/.test(t))&&i("Invalid character: the string to be decoded is not correctly encoded.");for(var n,o,r=0,a="",d=-1;++d<e;)o=s.indexOf(t.charAt(d)),n=r%4?64*n+o:o,r++%4&&(a+=String.fromCharCode(255&n>>(-2*r&6)));return a},version:"0.1.0"};if(e&&!e.nodeType)if(n)n.exports=a;else for(var d in a)a.hasOwnProperty(d)&&(e[d]=a[d]);else t.base64=a}(bt),function(t){t.SpeechlyFirstConnect="SpeechlyFirstConnect"}(lt||(lt={})),function(t){t.speechlypoweron="speechlypoweron",t.holdstart="holdstart",t.holdend="holdend",t.speechstate="speechstate",t.audiosourcestate="audiosourcestate",t.speechsegment="speechsegment",t.speechhandled="speechhandled",t.showhint="showhint",t.transcriptdrawerhint="hint",t.speechlyintroready="speechlyintroready",t.speechlyintroclosed="speechlyintroclosed",t.startcontext="startcontext",t.stopcontext="stopcontext",t.requeststartmicrophone="requeststartmicrophone"}(ft||(ft={})),function(t){t.Mic="mic",t.MicActive="micactive",t.Error="error",t.Denied="denied"}(ht||(ht={})),function(t){t.Hold="hold",t.Click="click",t.Noninteractive="noninteractive"}(pt||(pt={})),function(t){t.None="none",t.Connecting="connecting",t.Busy="busy"}(mt||(mt={})),function(t){t.None="none",t.Whirl="whirl"}(gt||(gt={})),st.Disconnected,st.Connected,st.Active,st.Failed,nt.NoBrowserSupport,nt.NoAudioConsent;const vt=()=>{const t=O();return(e,n)=>{t.dispatchEvent(new CustomEvent(e,{detail:n,composed:!0}))}},{window:yt}=G;function wt(t){let e,n,o,r,i,s,a,d,u,l,f,h;return{c(){e=v("modalcontent"),n=v("animation"),o=v("button"),r=y(" "),i=v("video"),s=v("source"),d=y("\n        Your browser does not support the video tag."),E(o,"class","close"),c(s.src,a=t[0])||E(s,"src",a),E(s,"type","video/mp4"),E(i,"width","100%"),E(i,"height","auto"),i.autoplay=!0,i.muted=!0,i.loop=!0,E(e,"class",t[2])},m(c,a){b(c,e,a),p(e,n),p(n,o),p(n,r),p(n,i),p(i,s),p(i,d),l=!0,f||(h=w(o,"click",t[5]),f=!0)},p(t,n){(!l||1&n&&!c(s.src,a=t[0]))&&E(s,"src",a),(!l||4&n)&&E(e,"class",t[2])},i(n){l||(M((()=>{u||(u=Z(e,t[4],{},!0)),u.run(1)})),l=!0)},o(n){u||(u=Z(e,t[4],{},!1)),u.run(0),l=!1},d(t){t&&$(e),t&&u&&u.end(),f=!1,h()}}}function Et(e){let n,o,i,s,c=e[3]&&wt(e);return{c(){n=v("modal"),c&&c.c(),this.c=t,x(n,"--remsize",e[1])},m(t,r){b(t,n,r),c&&c.m(n,null),o=!0,i||(s=w(yt,"keydown",e[6]),i=!0)},p(t,[e]){t[3]?c?(c.p(t,e),8&e&&V(c,1)):(c=wt(t),c.c(),V(c,1),c.m(n,null)):c&&(W={r:0,c:[],p:W},Y(c,1,1,(()=>{c=null})),W.r||r(W.c),W=W.p),(!o||2&e)&&x(n,"--remsize",t[1])},i(t){o||(V(c),o=!0)},o(t){Y(c),o=!1},d(t){t&&$(n),c&&c.d(),i=!1,s()}}}function xt(t,e,n){let o,{video:r=""}=e,{hide:i}=e,{remsize:s="1.0rem"}=e,{position:c="fixed"}=e;const a=vt(),d=(u=et,function(t,e){if(!t.hasOwnProperty("ownerDocument")){Object.defineProperty(t,"ownerDocument",{get:function(){return t.parentElement}});let e=t;for(;e.parentElement;)e=e.parentElement;t.parentElement.head=e}return u(t,e)});var u;let l=!1;var f;f=()=>{n(8,l=!0)},O().$$.on_mount.push(f);const h=()=>{n(3,o=!1),a("speechlyvideoclosed"),window.postMessage({type:"speechlyvideoclosed"},"*")};return t.$$set=t=>{"video"in t&&n(0,r=t.video),"hide"in t&&n(7,i=t.hide),"remsize"in t&&n(1,s=t.remsize),"position"in t&&n(2,c=t.position)},t.$$.update=()=>{384&t.$$.dirty&&n(3,o=l&&"false"===i)},[r,s,c,o,d,h,t=>{l&&"Escape"===t.key&&(t.preventDefault(),h())},i,l]}class St extends tt{constructor(t){super(),this.shadowRoot.innerHTML="<style>modal{font-size:var(--remsize);height:100%}modalcontent{z-index:2001;pointer-events:none}modalcontent.fixed{position:fixed;top:0;left:0;right:0;bottom:0;overflow-x:hidden;overflow-y:auto}modalcontent.absolute{position:absolute;top:0;left:0;right:0;height:100vh}animation{position:absolute;box-sizing:border-box;width:300px;margin:1rem;top:0;right:0;border-radius:8px;pointer-events:auto}video{box-sizing:border-box;width:100%;border-radius:0.5rem;overflow:hidden;border:1px solid #0002}.close{--button-size:1.5rem;display:block;box-sizing:border-box;position:absolute;z-index:1000;top:0.25rem;right:0.25rem;margin:0;padding:0;width:var(--button-size);height:var(--button-size);border:0;color:black;border-radius:1.5rem;background:transparent;box-shadow:0 0 0 1px transparent;transition:transform 0.2s cubic-bezier(0.25, 0.1, 0.25, 1),\n                background 0.2s cubic-bezier(0.25, 0.1, 0.25, 1);-webkit-appearance:none}.close:before,.close:after{content:'';display:block;box-sizing:border-box;position:absolute;top:50%;width:calc(var(--button-size) - 0.5rem);height:1px;background:#728195;transform-origin:center;transition:height 0.2s cubic-bezier(0.25, 0.1, 0.25, 1),\n                background 0.2s cubic-bezier(0.25, 0.1, 0.25, 1)}.close:before{-webkit-transform:translate(0, -50%) rotate(45deg);-moz-transform:translate(0, -50%) rotate(45deg);transform:translate(0, -50%) rotate(45deg);left:0.25rem}.close:after{-webkit-transform:translate(0, -50%) rotate(-45deg);-moz-transform:translate(0, -50%) rotate(-45deg);transform:translate(0, -50%) rotate(-45deg);left:0.25rem}.close:hover{background:#ffffff}.close:hover:before,.close:hover:after{height:2px;background:black}.close:focus{border-color:#3399ff;box-shadow:0 0 0 2px #3399ff}.close:active{transform:scale(0.9)}.close:hover,.close:focus,.close:active{outline:none}</style>",Q(this,{target:this.shadowRoot,props:S(this.attributes),customElement:!0},xt,Et,a,{video:0,hide:7,remsize:1,position:2},null),t&&(t.target&&b(t.target,this,t.anchor),t.props&&(this.$set(t.props),j()))}static get observedAttributes(){return["video","hide","remsize","position"]}get video(){return this.$$.ctx[0]}set video(t){this.$$set({video:t}),j()}get hide(){return this.$$.ctx[7]}set hide(t){this.$$set({hide:t}),j()}get remsize(){return this.$$.ctx[1]}set remsize(t){this.$$set({remsize:t}),j()}get position(){return this.$$.ctx[2]}set position(t){this.$$set({position:t}),j()}}customElements.get("video-guide")?console.warn("Skipping re-defining customElement video-guide"):customElements.define("video-guide",St)}));
//# sourceMappingURL=video-guide.js.map
